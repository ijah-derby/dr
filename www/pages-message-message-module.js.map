{"version":3,"sources":["./src/app/pages/message/message.page.html","./src/app/pages/message/message.module.ts","./src/app/pages/message/message.page.scss","./src/app/pages/message/message.page.ts"],"names":[],"mappings":"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","file":"pages-message-message-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button mode=\\\"md\\\" defaultHref=\\\"messages\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{title}}</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button fill=\\\"clear\\\" (click)=\\\"viewUser(userId)\\\">\\n        <ion-icon name=\\\"information-circle-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [scrollEvents]=\\\"true\\\" #content>\\n  <div class=\\\"messages\\\" #contentArea>\\n    <p class=\\\"center\\\" *ngIf=\\\"startIndex > 0\\\"><span tappable (click)=\\\"loadPreviousMessages()\\\">Load previous\\n        messages</span></p>\\n    <div *ngFor=\\\"let message of messagesToShow\\\">\\n      <div *ngIf=\\\"isSender(message)\\\" class=\\\"chatbox right sender\\\">\\n        <div *ngIf=\\\"message.type == 'text'\\\">\\n          <p style=\\\"margin:0\\\">{{message.message}}</p>\\n        </div>\\n        <div *ngIf=\\\"message.type == 'location'\\\" [innerHtml]=\\\"message.message\\\"></div>\\n        <div *ngIf=\\\"message.type == 'image'\\\">\\n          <img tappable (click)=\\\"enlargeImage(message.message)\\\" src=\\\"{{message.message}}\\\" (load)=\\\"scrollBottom()\\\" />\\n        </div>\\n        <div *ngIf=\\\"message.type == 'video'\\\">\\n          <video controls width=\\\"100%\\\">\\n            <source src=\\\"{{message.message}}\\\" type=\\\"video/mp4\\\">\\n          </video>\\n        </div>\\n        <span>{{message.date | DateFormat}}</span>\\n      </div>\\n      <div *ngIf=\\\"!isSender(message)\\\" class=\\\"chatbox left\\\">\\n        <div *ngIf=\\\"message.type == 'text'\\\">\\n          <p style=\\\"margin:0\\\">{{message.message}}</p>\\n        </div>\\n        <div *ngIf=\\\"message.type == 'location'\\\" [innerHtml]=\\\"message.message\\\"></div>\\n        <div *ngIf=\\\"message.type == 'image'\\\">\\n          <img tappable (click)=\\\"enlargeImage(message.message)\\\" src=\\\"{{message.message}}\\\" (load)=\\\"scrollBottom()\\\" />\\n        </div>\\n        <div *ngIf=\\\"message.type == 'video'\\\">\\n          <video controls width=\\\"100%\\\">\\n            <source src=\\\"{{message.message}}\\\" type=\\\"video/mp4\\\">\\n          </video>\\n        </div>\\n        <span>{{message.date | DateFormat}}</span>\\n      </div>\\n    </div>\\n\\n  </div>\\n</ion-content>\\n\\n<ion-footer>\\n  <ion-toolbar>\\n    <ion-item lines=\\\"none\\\">\\n      <ion-button slot=\\\"start\\\" fill=\\\"clear\\\" (click)=\\\"attach()\\\">\\n        <ion-icon src=\\\"../../../assets/icons/attach.svg\\\"></ion-icon>\\n      </ion-button>\\n      <ion-textarea style=\\\"height: 100%;\\\" autoGrow=\\\"true\\\" rows=\\\"1\\\" placeholder=\\\"Type your message\\\"\\n        [(ngModel)]=\\\"message\\\"></ion-textarea>\\n      <ion-button slot=\\\"end\\\" color=\\\"primary\\\" fill=\\\"clear\\\" (click)=\\\"send('text')\\\" [disabled]=\\\"!message\\\">\\n        send\\n      </ion-button>\\n    </ion-item>\\n  </ion-toolbar>\\n</ion-footer>\\n<input\\n  hidden\\n  #fileInputButton\\n  type=\\\"file\\\"\\n  (change)=\\\"detectFiles($event)\\\"\\n  multiple\\n/>\\n<input hidden #videoInputButton type=\\\"file\\\" (change)=\\\"detectVideo($event)\\\" />\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MessagePage } from './message.page';\nimport { SharedModule } from 'src/shared/shared.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MessagePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [MessagePage],\n  providers: [\n    \n  ]\n})\nexport class MessagePageModule {}\n","export default \":host .title-img {\\n  width: 30px;\\n  height: 30px;\\n  border-radius: 50%;\\n  background-size: contain !important;\\n  background-color: var(--ion-color-light-shade);\\n  margin-right: 10px;\\n  border: 1px solid var(--ion-color-light-shade);\\n}\\n:host .clear {\\n  clear: both;\\n}\\n:host .content-wrapper {\\n  height: 100%;\\n}\\n:host .content-wrapper .from-me,\\n:host .content-wrapper .from-them {\\n  position: relative;\\n  border-radius: 1em;\\n  margin: 10px 0;\\n  overflow: hidden;\\n}\\n:host .content-wrapper .from-me .image,\\n:host .content-wrapper .from-them .image {\\n  width: 200px;\\n  height: 200px;\\n}\\n:host .content-wrapper .from-me .image-group,\\n:host .content-wrapper .from-them .image-group {\\n  display: grid;\\n  grid-template-columns: repeat(2, 1fr);\\n  grid-auto-rows: auto;\\n  grid-gap: 0.5rem;\\n  padding: 10px 10px 5px;\\n  border-top-left-radius: 1em;\\n}\\n:host .content-wrapper .from-me .image-group .image-group-image,\\n:host .content-wrapper .from-them .image-group .image-group-image {\\n  height: 100px;\\n  width: 100px;\\n  border: 1px solid var(--ion-color-medium);\\n  border-radius: 1em;\\n}\\n:host .content-wrapper .from-me .text,\\n:host .content-wrapper .from-them .text {\\n  padding: 10px 20px;\\n  margin: 0;\\n}\\n:host .content-wrapper .from-me .text ::ng-deep p,\\n:host .content-wrapper .from-them .text ::ng-deep p {\\n  margin: 0;\\n}\\n:host .content-wrapper .from-me .text ::ng-deep a,\\n:host .content-wrapper .from-them .text ::ng-deep a {\\n  color: var(--ion-color-primary);\\n}\\n:host .content-wrapper .from-me {\\n  color: var(--ion-color-dark);\\n  background: var(--ion-color-light-shade);\\n  border-top-right-radius: 0px;\\n  float: right;\\n}\\n:host .content-wrapper .from-them {\\n  background: var(--ion-color-gradient);\\n  border-top-left-radius: 0px;\\n  color: var(--ion-color-light);\\n  float: left;\\n}\\n:host ion-footer textarea {\\n  padding: 5px 10px;\\n  overflow: hidden;\\n  height: 40px !important;\\n  width: calc(100% - 20px);\\n  border: 1px solid var(--ion-color-medium);\\n  outline: none;\\n  resize: none;\\n  margin: 5px 10px 0px;\\n  border-radius: 20px;\\n  color: black;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWNib29rL0Rlc2t0b3AvQ2xpZW50cy9kci9zcmMvYXBwL3BhZ2VzL21lc3NhZ2UvbWVzc2FnZS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL21lc3NhZ2UvbWVzc2FnZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0k7RUFDRSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0EsbUNBQUE7RUFDQSw4Q0FBQTtFQUNBLGtCQUFBO0VBQ0EsOENBQUE7QUNBTjtBREVJO0VBQ0UsV0FBQTtBQ0FOO0FER0k7RUFDRSxZQUFBO0FDRE47QURHTTs7RUFFRSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsY0FBQTtFQUNBLGdCQUFBO0FDRFI7QURHUTs7RUFDRSxZQUFBO0VBQ0EsYUFBQTtBQ0FWO0FER1E7O0VBQ0UsYUFBQTtFQUNBLHFDQUFBO0VBQ0Esb0JBQUE7RUFDQSxnQkFBQTtFQUNBLHNCQUFBO0VBQ0EsMkJBQUE7QUNBVjtBREVVOztFQUNFLGFBQUE7RUFDQSxZQUFBO0VBQ0EseUNBQUE7RUFDQSxrQkFBQTtBQ0NaO0FER1E7O0VBQ0Usa0JBQUE7RUFDQSxTQUFBO0FDQVY7QURHWTs7RUFDRSxTQUFBO0FDQWQ7QURHWTs7RUFDRSwrQkFBQTtBQ0FkO0FETU07RUFDRSw0QkFBQTtFQUNBLHdDQUFBO0VBQ0EsNEJBQUE7RUFDQSxZQUFBO0FDSlI7QURPTTtFQUNFLHFDQUFBO0VBQ0EsMkJBQUE7RUFDQSw2QkFBQTtFQUNBLFdBQUE7QUNMUjtBRFlNO0VBQ0UsaUJBQUE7RUFDQSxnQkFBQTtFQUNBLHVCQUFBO0VBQ0Esd0JBQUE7RUFDQSx5Q0FBQTtFQUNBLGFBQUE7RUFDQSxZQUFBO0VBQ0Esb0JBQUE7RUFDQSxtQkFBQTtFQUNFLFlBQUE7QUNWViIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL21lc3NhZ2UvbWVzc2FnZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gICAgLnRpdGxlLWltZyB7XG4gICAgICB3aWR0aDogMzBweDtcbiAgICAgIGhlaWdodDogMzBweDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgIGJhY2tncm91bmQtc2l6ZTogY29udGFpbiAhaW1wb3J0YW50O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW9uLWNvbG9yLWxpZ2h0LXNoYWRlKTtcbiAgICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWlvbi1jb2xvci1saWdodC1zaGFkZSk7XG4gICAgfVxuICAgIC5jbGVhciB7XG4gICAgICBjbGVhcjogYm90aDtcbiAgICB9XG4gIFxuICAgIC5jb250ZW50LXdyYXBwZXIge1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICBcbiAgICAgIC5mcm9tLW1lLFxuICAgICAgLmZyb20tdGhlbSB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMWVtO1xuICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgXG4gICAgICAgIC5pbWFnZSB7XG4gICAgICAgICAgd2lkdGg6IDIwMHB4O1xuICAgICAgICAgIGhlaWdodDogMjAwcHg7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIC5pbWFnZS1ncm91cCB7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgyLCAxZnIpO1xuICAgICAgICAgIGdyaWQtYXV0by1yb3dzOiBhdXRvO1xuICAgICAgICAgIGdyaWQtZ2FwOiAwLjVyZW07XG4gICAgICAgICAgcGFkZGluZzogMTBweCAxMHB4IDVweDtcbiAgICAgICAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAxZW07XG4gIFxuICAgICAgICAgIC5pbWFnZS1ncm91cC1pbWFnZSB7XG4gICAgICAgICAgICBoZWlnaHQ6IDEwMHB4O1xuICAgICAgICAgICAgd2lkdGg6IDEwMHB4O1xuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxZW07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gIFxuICAgICAgICAudGV4dCB7XG4gICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4O1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgXG4gICAgICAgICAgOjpuZy1kZWVwIHtcbiAgICAgICAgICAgIHAge1xuICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICB9XG4gIFxuICAgICAgICAgICAgYSB7XG4gICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgICAgLmZyb20tbWUge1xuICAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWRhcmspO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItbGlnaHQtc2hhZGUpO1xuICAgICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMHB4O1xuICAgICAgICBmbG9hdDogcmlnaHQ7XG4gICAgICB9XG4gIFxuICAgICAgLmZyb20tdGhlbSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1ncmFkaWVudCk7XG4gICAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDBweDtcbiAgICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1saWdodCk7XG4gICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgfVxuICAgIH1cbiAgXG4gICBcbiAgXG4gICAgaW9uLWZvb3RlciB7XG4gICAgICB0ZXh0YXJlYSB7XG4gICAgICAgIHBhZGRpbmc6IDVweCAxMHB4O1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICBoZWlnaHQ6IDQwcHggIWltcG9ydGFudDtcbiAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIDIwcHgpO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1pb24tY29sb3ItbWVkaXVtKTtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgcmVzaXplOiBub25lO1xuICAgICAgICBtYXJnaW46IDVweCAxMHB4IDBweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMjBweDtcbiAgICAgICAgICBjb2xvcjogYmxhY2s7XG4gICAgICBcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgIiwiOmhvc3QgLnRpdGxlLWltZyB7XG4gIHdpZHRoOiAzMHB4O1xuICBoZWlnaHQ6IDMwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluICFpbXBvcnRhbnQ7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWlvbi1jb2xvci1saWdodC1zaGFkZSk7XG4gIG1hcmdpbi1yaWdodDogMTBweDtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0taW9uLWNvbG9yLWxpZ2h0LXNoYWRlKTtcbn1cbjpob3N0IC5jbGVhciB7XG4gIGNsZWFyOiBib3RoO1xufVxuOmhvc3QgLmNvbnRlbnQtd3JhcHBlciB7XG4gIGhlaWdodDogMTAwJTtcbn1cbjpob3N0IC5jb250ZW50LXdyYXBwZXIgLmZyb20tbWUsXG46aG9zdCAuY29udGVudC13cmFwcGVyIC5mcm9tLXRoZW0ge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJvcmRlci1yYWRpdXM6IDFlbTtcbiAgbWFyZ2luOiAxMHB4IDA7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG46aG9zdCAuY29udGVudC13cmFwcGVyIC5mcm9tLW1lIC5pbWFnZSxcbjpob3N0IC5jb250ZW50LXdyYXBwZXIgLmZyb20tdGhlbSAuaW1hZ2Uge1xuICB3aWR0aDogMjAwcHg7XG4gIGhlaWdodDogMjAwcHg7XG59XG46aG9zdCAuY29udGVudC13cmFwcGVyIC5mcm9tLW1lIC5pbWFnZS1ncm91cCxcbjpob3N0IC5jb250ZW50LXdyYXBwZXIgLmZyb20tdGhlbSAuaW1hZ2UtZ3JvdXAge1xuICBkaXNwbGF5OiBncmlkO1xuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgyLCAxZnIpO1xuICBncmlkLWF1dG8tcm93czogYXV0bztcbiAgZ3JpZC1nYXA6IDAuNXJlbTtcbiAgcGFkZGluZzogMTBweCAxMHB4IDVweDtcbiAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMWVtO1xufVxuOmhvc3QgLmNvbnRlbnQtd3JhcHBlciAuZnJvbS1tZSAuaW1hZ2UtZ3JvdXAgLmltYWdlLWdyb3VwLWltYWdlLFxuOmhvc3QgLmNvbnRlbnQtd3JhcHBlciAuZnJvbS10aGVtIC5pbWFnZS1ncm91cCAuaW1hZ2UtZ3JvdXAtaW1hZ2Uge1xuICBoZWlnaHQ6IDEwMHB4O1xuICB3aWR0aDogMTAwcHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xuICBib3JkZXItcmFkaXVzOiAxZW07XG59XG46aG9zdCAuY29udGVudC13cmFwcGVyIC5mcm9tLW1lIC50ZXh0LFxuOmhvc3QgLmNvbnRlbnQtd3JhcHBlciAuZnJvbS10aGVtIC50ZXh0IHtcbiAgcGFkZGluZzogMTBweCAyMHB4O1xuICBtYXJnaW46IDA7XG59XG46aG9zdCAuY29udGVudC13cmFwcGVyIC5mcm9tLW1lIC50ZXh0IDo6bmctZGVlcCBwLFxuOmhvc3QgLmNvbnRlbnQtd3JhcHBlciAuZnJvbS10aGVtIC50ZXh0IDo6bmctZGVlcCBwIHtcbiAgbWFyZ2luOiAwO1xufVxuOmhvc3QgLmNvbnRlbnQtd3JhcHBlciAuZnJvbS1tZSAudGV4dCA6Om5nLWRlZXAgYSxcbjpob3N0IC5jb250ZW50LXdyYXBwZXIgLmZyb20tdGhlbSAudGV4dCA6Om5nLWRlZXAgYSB7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSk7XG59XG46aG9zdCAuY29udGVudC13cmFwcGVyIC5mcm9tLW1lIHtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYXJrKTtcbiAgYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLWxpZ2h0LXNoYWRlKTtcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDBweDtcbiAgZmxvYXQ6IHJpZ2h0O1xufVxuOmhvc3QgLmNvbnRlbnQtd3JhcHBlciAuZnJvbS10aGVtIHtcbiAgYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLWdyYWRpZW50KTtcbiAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMHB4O1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWxpZ2h0KTtcbiAgZmxvYXQ6IGxlZnQ7XG59XG46aG9zdCBpb24tZm9vdGVyIHRleHRhcmVhIHtcbiAgcGFkZGluZzogNXB4IDEwcHg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGhlaWdodDogNDBweCAhaW1wb3J0YW50O1xuICB3aWR0aDogY2FsYygxMDAlIC0gMjBweCk7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xuICBvdXRsaW5lOiBub25lO1xuICByZXNpemU6IG5vbmU7XG4gIG1hcmdpbjogNXB4IDEwcHggMHB4O1xuICBib3JkZXItcmFkaXVzOiAyMHB4O1xuICBjb2xvcjogYmxhY2s7XG59Il19 */\"","import { Component, OnInit, ViewChild, ElementRef, Injector } from '@angular/core';\nimport { Camera } from '@ionic-native/camera/ngx';\nimport { ActionSheetController, AlertController, ModalController, IonContent } from '@ionic/angular';\nimport { AngularFireDatabase } from '@angular/fire/database';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport * as firebase from \"firebase/app\";\nimport 'firebase/auth';\nimport { LoaderService } from 'src/app/services/loader.service';\nimport { DataService } from 'src/app/services/data.service';\nimport { ImageService } from 'src/app/services/image.service';\nimport { Extender } from 'src/shared/helpers/extender';\nimport { FeedAddComponent } from 'src/pages/feed/components/feed-add/feed-add.component';\nimport { AuthService } from 'src/pages/auth/services/auth/auth.service';\nimport { IUser } from 'src/pages/auth/helpers/model';\nimport { FirestoreService } from 'src/shared/services/firestore/firestore.service';\nimport { CommonService } from 'src/shared/services/common/common.service';\n\n@Component({\n  selector: 'app-message',\n  templateUrl: './message.page.html',\n  styleUrls: ['./message.page.scss'],\n})\nexport class MessagePage extends Extender implements OnInit {\n\n  @ViewChild(IonContent, null) contentArea: IonContent;\n\n  userId: any;\n  title: any;\n  message: any;\n  conversationId: any;\n  messages: any;\n  updateDateTime: any;\n  messagesToShow: any;\n  startIndex: any = -1;\n  // Set number of messages to show.\n  numberOfMessages = 10;\n  loggedInUserId: any;\n\n  currentUser: IUser;\n\n\n  @ViewChild(\"fileInputButton\", null) private fileInputButton: ElementRef;\n  @ViewChild(\"videoInputButton\", null) private videoInputButton: ElementRef;\n\n  // MessagePage\n  // This is the page where the user can chat with a friend.\n  constructor(\n    // public navCtrl: NavController,\n    // public navParams: NavParams,\n    protected injector: Injector,\n    private route: ActivatedRoute,\n    private dataProvider: DataService,\n    private angularfire: AngularFireDatabase,\n    private loadingProvider: LoaderService,\n    private imageProvider: ImageService,\n    private camera: Camera,\n    private actionSheet: ActionSheetController,\n    private geolocation: Geolocation,\n    private authService: AuthService,\n    private firestore: FirestoreService,\n    private commonService: CommonService\n  ) { \n    super(injector);\n    this.route.queryParamMap.subscribe(params => {\n      this.userId = params.get(\"id\");\n    });\n  }\n\n  ngOnInit() {\n\n  }\n\n  async ionViewDidEnter() {\n    this.loggedInUserId = firebase.auth().currentUser.uid;\n\n    this.currentUser = await this.authService.getUser();\n    \n    // Get friend details.\n    this.dataProvider.getUser(this.userId).subscribe((user: any) => {\n      this.title = user.displayName;\n    });\n\n    // Get conversationInfo with friend.\n    this.firestore.doc$('users/' + this.loggedInUserId + '/conversations/' + this.userId).subscribe((conversation: any) => {\n      if (conversation) {\n        // User already have conversation with this friend, get conversation\n        this.conversationId = conversation.conversationId;\n\n        console.log(\"conv fetched in chatWith\", conversation);\n\n        // Get conversation\n        this.dataProvider.getConversationMessages(this.conversationId).subscribe((messagesRes: any[]) => {\n\n          let messages = messagesRes;\n          console.log('messages',messages);\n          if (messages == null)\n            messages = [];\n          if (this.messages) {\n            // Just append newly added messages to the bottom of the view.\n            if (messages.length > this.messages.length) {\n              let message = messages[messages.length - 1];\n\n              this.dataProvider.getUser(message.sender).subscribe((user: any) => {\n                message.avatar = user.photoURL;\n              });\n              this.messages.push(message);\n              this.messagesToShow.push(message);\n            }\n          } else {\n            // Get all messages, this will be used as reference object for messagesToShow.\n            this.messages = [];\n            messages.forEach((message) => {\n              this.dataProvider.getUser(message.sender).subscribe((user: any) => {\n                message.avatar = user.photoURL;\n              });\n              this.messages.push(message);\n            });\n            // Load messages in relation to numOfMessages.\n            if (this.startIndex == -1) {\n              // Get initial index for numberOfMessages to show.\n              if ((this.messages.length - this.numberOfMessages) > 0) {\n                this.startIndex = this.messages.length - this.numberOfMessages;\n              } else {\n                this.startIndex = 0;\n              }\n            }\n            if (!this.messagesToShow) {\n              this.messagesToShow = [];\n            }\n            // Set messagesToShow\n            for (var i = this.startIndex; i < this.messages.length; i++) {\n              this.messagesToShow.push(this.messages[i]);\n            }\n            this.loadingProvider.presentProcessingLoading();\n          }\n        });\n      }\n    });\n\n    // Update messages' date time elapsed every minute based on Moment.js.\n    var that = this;\n    if (!that.updateDateTime) {\n      that.updateDateTime = setInterval(function () {\n        if (that.messages) {\n          that.messages.forEach((message) => {\n            let date = message.date;\n            message.date = new Date(date);\n          });\n        }\n      }, 60000);\n    }\n\n    setTimeout(() => this.scrollBottom(), 1000);\n  }\n  // Load previous messages in relation to numberOfMessages.\n  loadPreviousMessages() {\n    var that = this;\n    // Show loading.\n    this.loadingProvider.presentProcessingLoading();\n    setTimeout(function () {\n      // Set startIndex to load more messages.\n      if ((that.startIndex - that.numberOfMessages) > -1) {\n        that.startIndex -= that.numberOfMessages;\n      } else {\n        that.startIndex = 0;\n      }\n      // Refresh our messages list.\n      that.messages = null;\n      that.messagesToShow = null;\n\n      that.scrollTop();\n\n      // Populate list again.\n      that.ionViewDidEnter();\n    }, 1000);\n  }\n\n  // Update messagesRead when user lefts this page.\n  ionViewWillLeave() {\n    this.setMessagesRead();\n  }\n\n  // Check if currentPage is active, then update user's messagesRead.\n  setMessagesRead() {\n    this.firestore.col$('conversations/' + this.conversationId + '/messages').subscribe((snap: any[]) => {\n\n      if (snap.length > 0) {\n        this.firestore.update('users/' + this.loggedInUserId + '/conversations/' + this.userId, {messagesRead: snap.length});\n      }\n      this.loadingProvider.dismissLoader();\n    });\n  }\n\n  scrollBottom() {\n    setTimeout(() => {\n      if (this.contentArea.scrollToBottom) {\n        this.contentArea.scrollToBottom();\n      }\n    }, 500);\n    this.setMessagesRead();\n  }\n\n  scrollTop() {\n    setTimeout(() => {\n      if (this.contentArea.scrollToTop) {\n        this.contentArea.scrollToTop();\n      }\n    }, 500);\n  }\n\n\n  // Check if the user is the sender of the message.\n  isSender(message) {\n    if (message.sender == this.loggedInUserId) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n\n  // Send message, if there's no conversation yet, create a new conversation.\n  send(type) {\n    if (this.message) {\n      // User entered a text on messagebox\n      let msgID = this.firestore.createId();\n      let msg = {\n        date: new Date().toString(),\n        sender: this.loggedInUserId,\n        type: type,\n        message: this.message,\n        id: msgID\n      };\n\n      if (this.conversationId) {\n        let messages = JSON.parse(JSON.stringify(this.messages));\n\n        // Update conversation on database.\n        this.firestore.set('conversations/' + this.conversationId + '/messages/' + msgID, msg);\n        // Clear messagebox.\n        this.message = '';\n        this.scrollBottom();\n      } else {\n        console.log(\"else\")\n        let messages = [];\n        messages.push(msg);\n        // New Conversation with friend.\n        var users = [];\n        users.push(this.loggedInUserId);\n        users.push(this.userId);\n        // Add conversation.\n        let cid = this.firestore.createId();\n        this.firestore.set('conversations/' + cid, {\n          dateCreated: new Date().toString(),\n          users: users\n        }).then((success) => {\n          let conversationId = cid;\n          this.message = '';\n          // Add conversation reference to the users.\n          this.firestore.set('conversations/' + cid + '/messages/' + msg.id, msg);\n          this.firestore.set('users/' + this.loggedInUserId + '/conversations/' + this.userId, {\n            conversationId: conversationId,\n            messagesRead: 1\n          }).then(() => {\n          });\n          this.firestore.set('users/' + this.userId + '/conversations/' + this.loggedInUserId, {\n            conversationId: conversationId,\n            messagesRead: 0\n          });\n        });\n        this.scrollBottom();\n      }\n    }\n  }\n\n  viewUser(userId) {\n    this.router.navigateByUrl('userinfo/' + userId);\n  }\n\n\n  attach() {\n    this.actionSheet.create({\n      header: 'Choose attachments',\n      buttons: [{\n        text: 'Camera',\n        handler: () => {\n          if((window as any).cordova) {\n            this.imageProvider.uploadPhotoMessage(this.conversationId, this.camera.PictureSourceType.CAMERA).then((url) => {\n              this.message = url;\n              this.send(\"image\");\n            }, err => {\n              \n            });\n          } else {\n            (this.fileInputButton.nativeElement as HTMLInputElement).click();\n          }\n        }\n      }, {\n        text: 'Photo Library',\n        handler: () => {\n          if((window as any).cordova) {\n            this.imageProvider.uploadPhotoMessage(this.conversationId, this.camera.PictureSourceType.PHOTOLIBRARY).then((url) => {\n              this.message = url;\n              this.send(\"image\");\n            }, err => {\n              \n            });\n          } else {\n            (this.fileInputButton.nativeElement as HTMLInputElement).click();\n          }\n        }\n      },\n      {\n        text: 'Video',\n        handler: () => {\n          if((window as any).cordova) {\n            this.imageProvider.uploadVideoMessage(this.conversationId).then(url => {\n              this.message = url;\n              this.send(\"video\");\n            });\n          } else {\n            (this.videoInputButton.nativeElement as HTMLInputElement).click();\n          }\n        }\n      }\n        , {\n        text: 'Location',\n        handler: () => {\n          this.geolocation.getCurrentPosition({\n            timeout: 5000\n          }).then(res => {\n            let locationMessage = \"Location:<br> lat:\" + res.coords.latitude + \"<br> lng:\" + res.coords.longitude;\n            let mapUrl = \"<a href='https://www.google.com/maps/search/\" + res.coords.latitude + \",\" + res.coords.longitude + \"'>View on Map</a>\";\n\n            let confirm = this.alertCtrl.create({\n              header: 'Your Location',\n              message: locationMessage,\n              buttons: [{\n                text: 'cancel',\n                handler: () => {\n                  console.log(\"canceled\");\n                }\n              }, {\n                text: 'Share',\n                handler: () => {\n                  this.message = locationMessage + \"<br>\" + mapUrl;\n                  this.send(\"location\");\n                }\n              }]\n            }).then(r => r.present());\n          }, locationErr => {\n            console.log(\"Location Error\" + JSON.stringify(locationErr));\n          });\n        }\n      }, {\n        text: 'cancel',\n        role: 'cancel',\n        handler: () => {\n          console.log(\"cancelled\");\n        }\n      }]\n    }).then(r => r.present());\n  }\n\n  // Enlarge image messages.\n  enlargeImage(img) {\n    // this.modalCtrl.create({\n    //   component: ImagemodalPage,\n    //   componentProps: {\n    //     img: img\n    //   }\n    // }).then(res => res.present())\n  }\n\n  public detectFiles(event: any) {\n    this.loadingProvider.presentProcessingLoading();\n    this.commonService.getImagesFromFiles(event).then((images) => {\n      console.log('images', images);\n      (this.fileInputButton.nativeElement as HTMLInputElement).value = null;\n      images.forEach(imageData => {\n        this.firestore.uploadImage(imageData, new Date().getTime().toString() + '.png', 'chat-images').then(resp => {\n          this.message = resp;\n          this.send(\"image\");\n          this.loadingProvider.dismissLoader();\n        });\n      }, err => {\n        this.loadingProvider.dismissLoader();\n      })\n    }, err => {\n      this.loadingProvider.dismissLoader();\n    });\n  }\n\n   /** used for browser image uploads, hooked up to input file type on change event */\n   public detectVideo(event: any) {\n    this.loadingProvider.presentProcessingLoading();\n    this.commonService.getVideoFile(event).then((url: any) => {\n      this.firestore\n      .uploadVideoString(url, `${Date.now()}-${this.currentUser.uid}`)\n      .then(\n        async (link) => {\n          this.message = link;\n          this.send(\"video\");\n          this.loadingService.dismissLoader();\n        },\n        (err) => {\n          this.loadingProvider.dismissLoader();\n          this.toast(\"Error in uploading video\");\n        }\n      );\n    }, err => {\n      this.loadingProvider.dismissLoader();\n    });\n  }\n\n}\n"],"sourceRoot":"webpack:///"}